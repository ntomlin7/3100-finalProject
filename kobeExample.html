<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwollenHippo Group Evals</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/pulse/bootstrap.min.css" integrity="sha384-L7+YG8QLqGvxQGffJ6utDKFwmGwtLcCjtwvonVZR/Ba2VzhpMwBz51GaXnUsuYbj" crossorigin="anonymous">

    <style>
        .card {
            border: none;
            border-radius: 1rem;
            background-color: #fff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            position: relative;
        }

        .card-header {
            background-color: #2a2a2a;
            color: #fff;
            padding: 1rem 1.25rem;
            margin: 0;
            font-weight: 600;
            border: none;
            overflow: hidden; /* only here to mask the white line cleanly */
            position: relative;
            z-index: 1;
        }

      </style>
</head>

<body class="bg-dark">
    <!-- Main dashboard view -->
    <div class="container mt-4">
        <!-- Top 3 buttons -->
        <div class="row mb-4">
            <div class="col-md-4">
                <button class="btn btn-primary btn-lg btn-block rounded" id="btnCreatedSurveys">Created Surveys</button>
            </div>
            <div class="col-md-4">
                <button class="btn btn-primary btn-lg btn-block rounded" id="btnCompletedSurveys">Completed Surveys</button>
            </div>
            <div class="col-md-4">
                <button class="btn btn-primary btn-lg btn-block rounded" id="btnCreateClass">Create Class</button>
            </div>
        </div>
        
        <!-- Main content area -->
        <div class="row">
            <!-- Left sidebar with dropdown menus -->
            <div class="col-md-3 rounded">
                <div class="card mb-4 rounded">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Classes</h5>
                    </div>
                    <div class="card-body p-0">
                        <div class="dropdown">
                            <button class="btn btn-light btn-block text-left border-bottom rounded dropdown-toggle" type="button" id="classesDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                Classes
                            </button>
                            <ul class="dropdown-menu w-100" aria-labelledby="classesDropdown">
                                <li><a class="dropdown-item rounded" href="#">Team 1</a></li>
                                <li><a class="dropdown-item rounded" href="#">Team 2</a></li>
                                <li><a class="dropdown-item rounded" href="#">Burchfield</a></li>
                            </ul>
                        </div>
                        
                        <div class="dropdown">
                            <button class="btn btn-light btn-block text-left border-bottom rounded dropdown-toggle" type="button" id="invitesDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                Invites
                            </button>
                            <ul class="dropdown-menu w-100 rounded" aria-labelledby="invitesDropdown">
                                <li><a class="dropdown-item rounded" href="#">Pending Invites</a> <span class="badge badge-primary badge-pill">2</span> </li>
                                <li><a class="dropdown-item rounded" href="#">Sent Invites</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Main survey display area -->
            <div class="col-md-9 rounded">
                <!-- Created Surveys Section -->
                <div class="card rounded" id="createdSurveysSection">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Created Surveys</h5>
                    </div>
                    <div class="card-body">
                        <div class="row row-cols-1 row-cols-md-3 g-4">
                            <!-- Created Survey items -->
                            <div class="col">
                                <div class="card h-100 border-primary rounded">
                                    <div class="card-body">
                                        <h5 class="card-title">Team Assessment</h5>
                                        <p class="card-text">Team performance evaluation survey</p>
                                        <span class="badge bg-primary rounded text-white">Active</span>
                                        <span class="badge bg-info rounded text-white">10 Responses</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="card h-100 border-primary rounded">
                                    <div class="card-body">
                                        <h5 class="card-title">Project Feedback</h5>
                                        <p class="card-text">Final project evaluation form</p>
                                        <span class="badge bg-primary rounded text-white">Active</span>
                                        <span class="badge bg-info rounded text-white">5 Responses</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="card h-100 border-primary rounded">
                                    <div class="card-body">
                                        <h5 class="card-title">Course Evaluation</h5>
                                        <p class="card-text">End of semester course review</p>
                                        <span class="badge bg-secondary rounded text-white">Draft</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Completed Surveys Section -->
                <div class="card rounded" id="completedSurveysSection" style="display: none;">
                    <div class="card-header bg-success text-whites">
                        <h5 class="mb-0">Completed Surveys</h5>
                    </div>
                    <div class="card-body ">
                        <div class="row row-cols-1 row-cols-md-3 g-4">
                            <!-- Completed Survey items -->
                            <div class="col">
                                <div class="card h-100 border-success rounded">
                                    <div class="card-body">
                                        <h5 class="card-title">Midterm Feedback</h5>
                                        <p class="card-text">Completed on March 15, 2025</p>
                                        <span class="badge bg-success rounded">Submitted</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="card h-100 border-success rounded">
                                    <div class="card-body">
                                        <h5 class="card-title">Peer Review</h5>
                                        <p class="card-text">Completed on April 2, 2025</p>
                                        <span class="badge bg-success rounded">Submitted</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="card h-100 border-success rounded">
                                    <div class="card-body">
                                        <h5 class="card-title">Group Dynamics</h5>
                                        <p class="card-text">Completed on April 10, 2025</p>
                                        <span class="badge bg-success rounded">Submitted</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Create Class Form Section -->
                <div class="card rounded" id="createClassSection" style="display: none;">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0">Create New Class</h5>
                    </div>
                    <div class="card-body rounded">
                        <form class ="rounded" id="frmCreateClass">
                            <div class="mb-3">
                                <label for="txtClassName" class="form-label">Class Name</label>
                                <input type="text" class="form-control rounded" id="txtClassName" placeholder="Enter class name">
                            </div>
                            <div class="mb-3">
                                <label for="txtClassDescription" class="form-label">Description</label>
                                <textarea class="form-control rounded" id="txtClassDescription" rows="3" placeholder="Enter class description"></textarea>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="cboTerm" class="form-label">Term</label>
                                    <select class="form-control rounded" id="cboTerm">
                                        <option value="">Select a term</option>
                                        <option value="Spring 2025">Spring 2025</option>
                                        <option value="Summer 2025">Summer 2025</option>
                                        <option value="Fall 2025">Fall 2025</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="cboVisibility" class="form-label">Visibility</label>
                                    <select class="form-control rounded" id="cboVisibility">
                                        <option value="">Select visibility</option>
                                        <option value="Public">Public</option>
                                        <option value="Private">Private</option>
                                        <option value="Invite Only">Invite Only</option>
                                    </select>
                                </div>
                            </div>
                            <div class="d-grid gap-2">
                                <button type="button" class="btn btn-warning rounded" id="btnSubmitCreateClass">Create Class</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Login/Registration forms (hidden initially, keeping same structure as original) -->
    <div class="d-flex justify-content-center align-items-center vh-100" style="display: none !important;">
        <form class="card col-12 col-md-8 col-lg-6" id="frmLogin">
            <div class="card-body">
                <h1 class="text-center mb-0 text-primary mt-2">SwollenHippo Group Evals</h1>
                <h3 class="text-center mb-4">User Login</h3>
                <input id="txtUsername" class="form-control" type="email" placeholder="johndoe@email.com" aria-label="email">
                <input id="txtLoginPassword" class="form-control mt-2" type="password" placeholder="password" aria-label="password">
                <hr />
                <button class="btn btn-primary col-12 mt-1" type="button" id="btnLogin">Log In</button>
                <button class="btn btn-link col-12 mt-3 mb-0" type="button" id="btnForgotPassword">Forgot your password? Click here</button>
                <button class="btn btn-link col-12 mt-0" type="button" id="btnSwapLogin">Need an account, register here</button>
            </div>
        </form>
        <form class="card col-12 col-md-8 col-lg-6" id="frmRegister" style="display:none;">
            <div class="card-body">
                <h1 class="text-center mb-0">SwollenHippo Group Evals</h1>
                <h6 class="mt-3 mb-1">New User Registration</h6>
                <div>
                    <input id="txtEmail" class="form-control mb-1" type="email" placeholder="johndoe@email.com" aria-label="email">
                    <input id="txtRegPassword" class="form-control mb-1" type="password" placeholder="Password" aria-label="password">
                </div>
                <div class="mt-4">
                    <input id="txtFirstName" class="form-control mb-1" type="text" placeholder="First Name" aria-label="first name">
                    <input id="txtMiddleName" class="form-control mb-1" type="text" placeholder="Middle Name" aria-label="middle name">
                    <input id="txtLastName" class="form-control mb-1" type="text" placeholder="Last Name" aria-label="last name">
                </div>
                <div class="mt-4">
                    <select id="cboUserType" class="form-control mb-1" placeholder="State" aria-label="are you an instructor or a user?">
                        <option value="">What type of user are you?</option>
                        <option value="Instructor">Instructor</option>
                        <option value="Student">Student</option>
                    </select>
                    <select id="cboContactType" class="form-control mb-1" placeholder="State" aria-label="Please select a contact preference?">
                        <option value="">What is your preferred method of contact?</option>
                        <option value="Mobile Phone">Mobile Phone</option>
                        <option value="Teams">Teams</option>
                        <option value="Discord">Discord</option>
                    </select>
                    <input id="txtContact" class="form-control mb-2" type="text" placeholder="Please enter contact info" aria-label="Enter contact info relevant to preferred selection ">
                </div>
                <button class="btn btn-primary col-12 mt-2" type="button" id="btnRegister">Register</button>
                <button class="btn btn-link col-12 mt-0" type="button" id="btnSwapRegister">Back to login</button>
            </div>
        </form>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        // Validation for the Registration Form using vanilla JS
        document.querySelector("#btnRegister").addEventListener("click", (e)=>{
            let strRegMessage = ''
            let blnError = false

            //Email Validation
            const regEmail = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/
            let strEmail = document.querySelector("#txtEmail").value
            strEmail = strEmail.toLowerCase()

            if(!regEmail.test(strEmail)) {
                blnError = true
                strRegMessage += '<p  class="mb-3 mt-0">Please enter a valid email address</p>'
            }

            //Password Validation - complex NIST compliant - at least 8 char, at least 1 upper, 1 lower, 1 number
            const regPassword = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/
            const strRegPassword  = document.querySelector("#txtRegPassword").value

            if(!regPassword.test(strRegPassword)) {
                blnError = true
                strRegMessage += '<p class="mb-0 mt-0">Password must: Be 8 characters, AND contain at least :1 lowercase, 1 uppercase, 1 number<p/>'
            }

            //Name Validation
            let strFirstName = $('#txtFirstName').val().toLowerCase()
            let strMiddleName = $('#txtMiddleName').val().toLowerCase()
            let strLastName = $('#txtLastName').val().toLowerCase()

            if(strFirstName < 1 || strMiddleName < 1 || strLastName < 1) {
                blnError = true
                strRegMessage += '<p class="mb-0 mt-0">You must input a first, middle, and last name<p/>'
            }

            //Instructor or student validation
            let strUser = $('#cboUserType').val()

            if(strUser == "") {
                blnError = true
                strRegMessage += '<p class="mb-0 mt-0">Please select a user type.<p/>'
            }

            //Contact Method Validation
            let strContactMethod = $('#cboContactType').val()
            let strContactInfo = document.querySelector('#txtContact').value
            const regPhone = /(?:\d{1}\s)?\(?(\d{3})\)?-?\s?(\d{3})-?\s?(\d{4})/

            if(strContactMethod == "") {
                blnError = true
                strRegMessage += '<p class="mb-0 mt-0">Please select a valid contact preference.<p/>'
            }

            if(strContactMethod == "Mobile Phone" && !regPhone.test(strContactInfo)) {
                blnError = true
                strRegMessage += '<p class="mb-0 mt-0">Please enter a valid phone number.<p/>'
            }
            else if(strContactInfo < 1) {
                blnError = true
                strRegMessage += '<p class="mb-0 mt-0">Please enter valid contact information.<p/>'
            }
            
            //Only throw an error alert if there is one
            if(blnError == true) {
                Swal.fire({
                    title: "Oh no, you have an error!",
                    html: strRegMessage,
                    icon: "error"
                });
            }

            //If no error, successful Registration
            if(blnError == false) {
                Swal.fire({
                    title: "Successfully Registered!",
                    html: strRegMessage,
                    icon: "success"
                });
            }
        })

        //Validation for login page
        document.querySelector("#btnLogin").addEventListener("click", (e)=>{
            let blnLoginError = false
            let strLoginMessage = ''

            //Email Validation
            const regLoginEmail = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/
            let strUsername = $("#txtUsername").val().toLowerCase()

            if(!regLoginEmail.test(strUsername)){
                blnLoginError = true
                strLoginMessage += '<p  class="mb-0 mt-0">Username must be an email address</p>'
            }

            //Password Validation
            const regPassword = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/
            const strLoginPassword = $('#txtLoginPassword').val()
            
            if(!regPassword.test(strLoginPassword)){
                blnLoginError = true
                strLoginMessage += '<p class="mb-0 mt-0">Please enter a valid password</p>'
            }

            //Only throw an error alert if there is one
            if(blnLoginError == true) {
                Swal.fire({
                    title: "Oh no, you have an error!",
                    html: strLoginMessage,
                    icon: "error"
                });
            }

            //If no error, successful login
            if(blnLoginError == false) {
                Swal.fire({
                    title: "Login Successful!",
                    html: strLoginMessage,
                    icon: "success"
                });
            }
        })
        
        // Swap function for the login and registration forms
        $('#btnSwapLogin').on('click',function(){
            $('#frmLogin').slideUp('fast', function(){
                $('#frmRegister').slideDown('fast')
            })
        })

        $('#btnSwapRegister').on('click', function(){
            $('#frmRegister').slideUp('fast', function(){
                $('#frmLogin').slideDown('fast')
            })
        })

        // Function to hide all content sections
        function hideAllSections() {
            $('#createdSurveysSection').hide();
            $('#completedSurveysSection').hide();
            $('#createClassSection').hide();
        }

        // Dashboard buttons functionality
        $('#btnCreatedSurveys').on('click', function(){
            hideAllSections();
            $('#createdSurveysSection').fadeIn();
            // Set this button as active
            $('.row.mb-4 .btn').removeClass('btn-secondary').addClass('btn-primary');
            $(this).removeClass('btn-primary').addClass('btn-secondary');
        })

        $('#btnCompletedSurveys').on('click', function(){
            hideAllSections();
            $('#completedSurveysSection').fadeIn();
            // Set this button as active
            $('.row.mb-4 .btn').removeClass('btn-secondary').addClass('btn-primary');
            $(this).removeClass('btn-primary').addClass('btn-secondary');
        })

        $('#btnCreateClass').on('click', function(){
            hideAllSections();
            $('#createClassSection').fadeIn();
            // Set this button as active
            $('.row.mb-4 .btn').removeClass('btn-secondary').addClass('btn-primary');
            $(this).removeClass('btn-primary').addClass('btn-secondary');
        })

        // Create Class form submission
        $('#btnSubmitCreateClass').on('click', function(){
            let className = $('#txtClassName').val();
            let classDescription = $('#txtClassDescription').val();
            let term = $('#cboTerm').val();
            let visibility = $('#cboVisibility').val();
            
            let isValid = true;
            let errorMessage = '';
            
            if (className.trim() === '') {
                isValid = false;
                errorMessage += '<p>Please enter a class name</p>';
            }
            
            if (term === '') {
                isValid = false;
                errorMessage += '<p>Please select a term</p>';
            }
            
            if (visibility === '') {
                isValid = false;
                errorMessage += '<p>Please select visibility setting</p>';
            }
            
            if (!isValid) {
                Swal.fire({
                    title: "Form Incomplete",
                    html: errorMessage,
                    icon: "error"
                });
            } else {
                Swal.fire({
                    title: "Class Created!",
                    text: `Your class "${className}" has been created successfully.`,
                    icon: "success"
                }).then(() => {
                    // Reset form
                    $('#frmCreateClass')[0].reset();
                    // Show Created Surveys section
                    $('#btnCreatedSurveys').click();
                });
            }
        });

        // Set Created Surveys as the default view when page loads
        $(document).ready(function() {
            $('#btnCreatedSurveys').click();
        });
    </script>
</body>
</html>
